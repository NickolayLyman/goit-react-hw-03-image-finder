{"version":3,"sources":["components/Modal/Modal.module.css","components/GalleryItem/GalleryItem.module.css","components/Gallery/Gallery.module.css","components/Button/Button.module.css","services/imgApi.js","components/QueryBar/QueryBar.jsx","components/GalleryItem/GalleryItem.jsx","components/Gallery/Gallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.js","index.js","components/QueryBar/QueryBar.module.css"],"names":["module","exports","fetchImages","searchQuery","page","searchParams","URLSearchParams","q","per_page","key","fetch","then","response","ok","json","Promise","reject","Error","QueryBar","state","initialValue","handleInputChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","onSubmit","props","trim","toast","error","this","className","st","bar","form","type","btn","label","input","autoComplete","autoFocus","placeholder","onChange","Component","GalleryItem","src","alt","largeImageURL","item","image","data-large-url","Gallery","onClick","imgList","gallery","map","index","webformatURL","Button","modalRoot","document","querySelector","Modal","isImageLoading","handleKeyDown","code","onClose","handleBackdropClick","target","onImageLoad","window","addEventListener","removeEventListener","createPortal","Overlay","color","height","width","onLoad","children","Status","App","status","showModal","currentImgObj","largeUrl","handleFormSubmit","resetPage","handleBtnClick","nextQuery","fethProcess","data","hits","length","prevState","catch","message","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","handleGalleryClick","e","dataset","nodeName","prevProps","prevQuery","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ed1975d1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__23lu7\",\"image\":\"Modal_image__7Jo48\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"GalleryItem_item__3jOod\",\"image\":\"GalleryItem_image__2zW95\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__XR2tC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Button_btn__2K8RZ\"};","const API_KEY = '19823143-e5d054b038f568b2343c680be';\r\nconst BASE_URL =\r\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\r\n\r\nexport default function fetchImages(searchQuery, page) {\r\n  const searchParams = new URLSearchParams({\r\n    q: searchQuery,\r\n    page,\r\n    per_page: 12,\r\n    key: API_KEY,\r\n  });\r\n  return fetch(`${BASE_URL}${searchParams}`).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n\r\n    return Promise.reject(\r\n      new Error(`There are no images for your query: ${searchQuery}`),\r\n    );\r\n  });\r\n}\r\n","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport st from './QueryBar.module.css';\r\n\r\nclass QueryBar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n\r\n  state = {\r\n    initialValue: '',\r\n  };\r\n\r\n  handleInputChange = event => {\r\n    this.setState({ initialValue: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { initialValue } = this.state;\r\n    const { onSubmit } = this.props;\r\n\r\n    if (initialValue.trim() === '') {\r\n      toast.error('Please, enter your query');\r\n    }\r\n\r\n    onSubmit(initialValue.trim());\r\n    this.setState({ initialValue: '' });\r\n  };\r\n\r\n  render() {\r\n    const { initialValue } = this.state;\r\n    return (\r\n      <header className={st.bar}>\r\n        <form onSubmit={this.handleSubmit} className={st.form}>\r\n          <button type=\"submit\" className={st.btn}>\r\n            <span className={st.label}>Search</span>\r\n          </button>\r\n          <input\r\n            className={st.input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={initialValue}\r\n            onChange={this.handleInputChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default QueryBar;\r\n","import PropTypes from 'prop-types';\r\nimport st from './GalleryItem.module.css';\r\n\r\nconst GalleryItem = ({ src, alt, largeImageURL }) => {\r\n  return (\r\n    <li className={st.item}>\r\n      <img\r\n        className={st.image}\r\n        src={src}\r\n        alt={alt}\r\n        data-large-url={largeImageURL}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nGalleryItem.propTypes = PropTypes.shape({\r\n  src: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  largeImageUrl: PropTypes.string,\r\n}).isRequired;\r\n\r\nexport default GalleryItem;\r\n","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport GalleryItem from '../GalleryItem/GalleryItem';\r\nimport st from './Gallery.module.css';\r\n\r\nclass Gallery extends Component {\r\n  static propTypes = PropTypes.shape({\r\n    imgList: PropTypes.array,\r\n    onClick: PropTypes.func,\r\n  }).isRequired;\r\n\r\n  render() {\r\n    const { onClick, imgList } = this.props;\r\n    return (\r\n      <ul onClick={onClick} className={st.gallery}>\r\n        {imgList.map(({ webformatURL, type, largeImageURL }, index) => (\r\n          <GalleryItem\r\n            key={index}\r\n            src={webformatURL}\r\n            alt={type}\r\n            largeImageURL={largeImageURL}\r\n          />\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Gallery;\r\n","import PropTypes from 'prop-types';\r\nimport st from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button\r\n      className={st.btn}\r\n      type=\"button\"\r\n      onClick={() => {\r\n        onClick();\r\n      }}\r\n    >\r\n      Load more...\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import { createPortal } from 'react-dom';\r\nimport { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loader from 'react-loader-spinner';\r\nimport st from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  static propTypes = PropTypes.shape({\r\n    src: PropTypes.string,\r\n    alt: PropTypes.string,\r\n    onClose: PropTypes.func,\r\n    children: PropTypes.element,\r\n  }).isRequired;\r\n\r\n  state = {\r\n    isImageLoading: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = event => {\r\n    if (event.code === 'Escape') {\r\n      this.props.onClose();\r\n      this.setState({ isImageLoading: true });\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n      this.setState({ isImageLoading: true });\r\n    }\r\n  };\r\n\r\n  onImageLoad = () => {\r\n    this.setState({ isImageLoading: false });\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n    return createPortal(\r\n      <div className={st.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={st.Modal}>\r\n          {this.state.isImageLoading && (\r\n            <Loader type=\"ThreeDots\" color=\"red\" height={80} width={80} />\r\n          )}\r\n          <img\r\n            src={src}\r\n            alt={alt}\r\n            onLoad={this.onImageLoad}\r\n            className={st.image}\r\n          />\r\n          {this.props.children}\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import { Component } from 'react';\nimport fetchImages from './services/imgApi';\nimport Loader from 'react-loader-spinner';\nimport { ToastContainer, toast } from 'react-toastify';\nimport QueryBar from './components/QueryBar/QueryBar';\nimport Gallery from './components/Gallery/Gallery';\nimport Button from './components/Button/Button';\nimport Modal from './components/Modal/Modal';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n    page: 1,\n    imgList: [],\n    error: '',\n    status: Status.IDLE,\n    showModal: false,\n    currentImgObj: { largeUrl: '', alt: '' },\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.searchQuery;\n    const nextQuery = this.state.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      this.setState({ imgList: [], status: Status.PENDING });\n      this.fethProcess(nextQuery);\n    }\n  }\n\n  handleFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n    this.resetPage();\n  };\n\n  handleBtnClick = () => {\n    const nextQuery = this.state.searchQuery;\n    this.setState({ status: Status.PENDING });\n    this.fethProcess(nextQuery);\n  };\n\n  fethProcess = nextQuery => {\n    fetchImages(nextQuery, this.state.page)\n      .then(data => {\n        if (data.hits.length === 0) {\n          this.setState({ status: Status.IDLE });\n          return toast.error('There is nothing to show');\n        }\n        this.setState(prevState => ({\n          imgList: [...prevState.imgList, ...data.hits],\n          status: Status.RESOLVED,\n        }));\n      })\n      .catch(({ message }) =>\n        this.setState({ error: message, status: Status.REJECTED }),\n      )\n      .finally(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n        this.setState(prevState => ({ page: (prevState.page += 1) }));\n      });\n  };\n\n  resetPage = () => {\n    this.setState({ page: 1 });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  handleGalleryClick = e => {\n    const largeUrl = e.target.dataset.largeUrl;\n    const alt = e.target.alt;\n\n    if (e.target.nodeName === 'IMG') {\n      this.setState({ currentImgObj: { largeUrl, alt } });\n    }\n    this.toggleModal();\n  };\n\n  render() {\n    const { imgList, error, status, showModal, currentImgObj } = this.state;\n\n    return (\n      <>\n        <QueryBar onSubmit={this.handleFormSubmit} />\n        {error && <h1>{error}</h1>}\n        <Gallery imgList={imgList} onClick={this.handleGalleryClick} />\n        {showModal && (\n          <Modal\n            src={currentImgObj.largeUrl}\n            alt={currentImgObj.alt}\n            onClose={this.toggleModal}\n          ></Modal>\n        )}\n        <div className=\"container\">\n          {status === Status.PENDING && (\n            <Loader type=\"ThreeDots\" color=\"red\" height={80} width={80} />\n          )}\n          {status === Status.RESOLVED && (\n            <Button onClick={this.handleBtnClick} />\n          )}\n        </div>\n        <ToastContainer autoClose={2500} />\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport './base.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bar\":\"QueryBar_bar__1G3jS\",\"form\":\"QueryBar_form__1OFC5\",\"btn\":\"QueryBar_btn__3Pchz\",\"label\":\"QueryBar_label__1K0od\",\"input\":\"QueryBar_input__1UALH\"};"],"sourceRoot":""}